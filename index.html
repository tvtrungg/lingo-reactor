<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reflex - Luy·ªán Ph·∫£n X·∫° Ti·∫øng Anh & Ti·∫øng Ph√°p</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .logo {
            font-size: 20px;
            font-weight: bold;
            color: #6d6d6d;
            text-align: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 1080px;
            min-height: 96vh;
            width: 90%;
            text-align: center;
        }

        h1 {
            color: #4a5568;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .create-collection {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
        }

        .create-collection .form-group {
            flex: 1;
        }

        .tab-buttons {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            background: #f7fafc;
            border-radius: 15px;
            padding: 5px;
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 0 5px;
        }

        .tab-btn.active {
            background: #4299e1;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(66, 153, 225, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4a5568;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 148px;
        }

        .btn {
            background: linear-gradient(45deg, #4299e1, #667eea);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(66, 153, 225, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-danger {
            background: linear-gradient(45deg, #e53e3e, #fc8181);
        }

        .btn-success {
            background: linear-gradient(45deg, #38a169, #68d391);
        }

        .game-area {
            background: #f7fafc;
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .word-display {
            font-size: 2.5em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4299e1, #667eea);
            transition: width 0.3s ease;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .stats-card {
            background: #a0ccf0;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .stats-number {
            font-size: 2.2em;
            font-weight: 600;
            color: #515b60;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .stats-label {
            color: #6b7280;
            font-weight: 500;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stats-icon {
            font-size: 2rem;
            color: #7c3aed;
        }

        .collection-list,
        .word-list {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            max-height: 500px;
            overflow-y: auto;
        }

        .collection-item,
        .word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            transition: background-color 0.3s ease;
        }

        .word-item .word-checkbox {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .word-item .word-text {
            flex: 1;
        }

        .collection-item:hover,
        .word-item:hover {
            background: #edf2f7;
        }

        .collection-item:last-child,
        .word-item:last-child {
            border-bottom: none;
        }

        .delete-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .answer-display {
            background: #e6fffa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid #4fd1c7;
        }

        .answer-french {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .answer-vietnamese {
            font-size: 1.2em;
            color: #4a5568;
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            width: 100%;
        }

        .file-input-wrapper:hover {
            border-color: #4299e1;
            background: #ebf8ff;
        }

        .file-input-wrapper input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #38a169;
        }

        .notification.error {
            background: #e53e3e;
        }

        .notification.info {
            background: #4299e1;
        }

        .edit-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            margin-right: 5px;
            cursor: pointer;
        }

        .edit-form {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
        }

        .edit-form input {
            flex: 1;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 5px;
        }

        .edit-form .btn {
            padding: 8px 15px;
            font-size: 12px;
        }

        .guide-title {
            color: #2d3748;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .guide-content {
            background: #ffffff;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            text-align: left;
        }

        .guide-section {
            margin-bottom: 30px;
        }

        .guide-section h4 {
            color: #2d3748;
            font-size: 1.4em;
            margin-bottom: 15px;
            border-left: 4px solid #4299e1;
            padding-left: 10px;
            font-weight: 600;
        }

        .guide-section p {
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1em;
        }

        .guide-section ul {
            list-style-type: none;
            margin-left: 0;
            color: #4a5568;
        }

        .guide-section ul li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        .guide-section ul li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #38a169;
            font-weight: bold;
        }

        .guide-section code {
            background: #f1f5f9;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            color: #d53f8c;
        }

        .guide-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            gap: 15px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: #4299e1;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .step-content h5 {
            color: #2d3748;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .ai-prompt-container {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border: 1px solid #e2e8f0;
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .prompt-header h5 {
            color: #2d3748;
            font-size: 1.2em;
            margin: 0;
        }

        .language-toggle {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }

        .lang-btn.active,
        .lang-btn:hover {
            background: #4299e1;
            color: white;
        }

        .prompt-content p {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.95em;
            border: 1px solid #e5e7eb;
            margin-bottom: 15px;
            line-height: 1.6;
            font-family: 'Consolas', monospace;
        }

        .ai-prompt-container ol {
            padding-left: 20px;
            margin-top: 10px;
            color: #4a5568;
        }

        .ai-prompt-container ol li {
            margin-bottom: 10px;
        }

        .ai-prompt-container h3 {
            font-size: 1.2em;
            margin: 20px 0;
        }

        .copy-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            font-size: 0.9em;
        }

        .word-checkbox {
            margin-right: 10px;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            max-width: 1000px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .modal-close {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #4a5568;
        }

        .modal-close:hover {
            color: #e53e3e;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                width: 95%;
            }

            .word-display {
                font-size: 1.5em;
            }

            .tab-buttons {
                flex-wrap: wrap;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }

            .create-collection {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Language Reflex</h1>
        <i class="logo">(tvtrung)</i>

        <div class="tab-buttons">
            <button class="tab-btn active" onclick="showTab('setup')">Thi·∫øt l·∫≠p</button>
            <button class="tab-btn" onclick="showTab('collection')">B·ªô s∆∞u t·∫≠p</button>
            <button class="tab-btn" onclick="showTab('game')">Ch∆°i game</button>
            <button class="tab-btn" onclick="showTab('stats')">Th·ªëng k√™</button>
            <button class="tab-btn" onclick="showTab('guide')">H∆∞·ªõng d·∫´n</button>
        </div>

        <!-- Tab Thi·∫øt l·∫≠p -->
        <div id="setup" class="tab-content active">
            <div class="create-collection">
                <div class="form-group">
                    <label for="collectionSelect">Ch·ªçn B·ªô s∆∞u t·∫≠p:</label>
                    <select id="collectionSelect">
                        <option value="">-- Ch·ªçn ho·∫∑c t·∫°o m·ªõi --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newCollectionName">T√™n B·ªô s∆∞u t·∫≠p m·ªõi (n·∫øu c√≥):</label>
                    <input type="text" id="newCollectionName" placeholder="Nh·∫≠p t√™n B·ªô s∆∞u t·∫≠p m·ªõi">
                </div>
            </div>
            <div class="form-group">
                <label for="wordInput">Nh·∫≠p t·ª´ v·ª±ng (m·ªói d√≤ng: Ti·∫øng Vi·ªát : Ti·∫øng Anh/Ph√°p):</label>
                <textarea id="wordInput" placeholder="V√≠ d·ª•:
Xin ch√†o : Hello ho·∫∑c Bonjour
T·∫°m bi·ªát : Goodbye ho·∫∑c Au revoir
C·∫£m ∆°n : Thank you ho·∫∑c Merci
Xin l·ªói : Sorry ho·∫∑c Excusez-moi
T√¥i y√™u b·∫°n : I love you ho·∫∑c Je t'aime"></textarea>
            </div>

            <div class="form-group">
                <label>Ho·∫∑c t·∫£i file JSON:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="fileInput" accept=".json">
                    <span>üìÅ Ch·ªçn file JSON ho·∫∑c k√©o th·∫£ v√†o ƒë√¢y</span>
                </div>
            </div>

            <button class="btn" onclick="addWords()">Th√™m t·ª´ v·ª±ng</button>
        </div>

        <!-- Tab B·ªô s∆∞u t·∫≠p -->
        <div id="collection" class="tab-content">
            <div class="form-group">
                <h3 style="margin-bottom: 20px; color: #4a5568;">üìö Danh s√°ch B·ªô s∆∞u t·∫≠p</h3>
                <button class="btn btn-success" onclick="saveToFile()">üíæ L∆∞u danh s√°ch</button>
                <button class="btn btn-danger" onclick="clearCollections()">üóëÔ∏è X√≥a t·∫•t c·∫£</button>
            </div>

            <div id="collectionList" class="collection-list"></div>

            <div
                style="margin-top: 20px; padding: 20px; background: #f0f9ff; border-radius: 10px; border-left: 4px solid #0ea5e9;">
                <p style="margin: 0; color: #0369a1;">
                    üí° <strong>H∆∞·ªõng d·∫´n:</strong> Nh·∫•p v√†o m·ªôt B·ªô s∆∞u t·∫≠p ƒë·ªÉ xem t·ª´ v·ª±ng. ƒê·ªÉ th√™m t·ª´ v·ª±ng, h√£y chuy·ªÉn
                    sang tab "Thi·∫øt l·∫≠p" v√† nh·∫≠p t·ª´ v·ª±ng theo ƒë·ªãnh d·∫°ng: <strong>Ti·∫øng Vi·ªát : Ti·∫øng Anh/Ph√°p</strong>
                </p>
            </div>
        </div>

        <!-- Tab Ch∆°i game -->
        <div id="game" class="tab-content">
            <div class="settings-grid">
                <div class="form-group">
                    <label for="displayTime">Th·ªùi gian hi·ªÉn th·ªã (s):</label>
                    <input type="number" id="displayTime" min="0.5" max="10" step="0.1" value="2">
                </div>
                <div class="form-group">
                    <label for="answerDisplayTime">Th·ªùi gian hi·ªÉn th·ªã ƒë√°p √°n (s):</label>
                    <input type="number" id="answerDisplayTime" min="1" max="10" step="0.1" value="3">
                </div>
                <div class="form-group">
                    <label for="gameMode">Ch·∫ø ƒë·ªô ch∆°i:</label>
                    <select id="gameMode">
                        <option value="vietnamese-to-target">Ti·∫øng Vi·ªát ‚Üí Ti·∫øng Anh/Ph√°p</option>
                        <option value="target-to-vietnamese">Ti·∫øng Anh/Ph√°p ‚Üí Ti·∫øng Vi·ªát</option>
                        <option value="mixed">Tr·ªôn l·∫´n</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="repeatCount">S·ªë l·∫ßn l·∫∑p m·ªói t·ª´:</label>
                    <input type="number" id="repeatCount" min="1" max="10" value="1">
                </div>
            </div>

            <div class="form-group">
                <label for="gameCollectionSelect">Ch·ªçn B·ªô s∆∞u t·∫≠p ƒë·ªÉ ch∆°i:</label>
                <select id="gameCollectionSelect">
                    <option value="">-- T·∫•t c·∫£ t·ª´ v·ª±ng --</option>
                </select>
            </div>
            <div class="game-area">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>

                <div id="gameDisplay">
                    <div class="word-display" id="wordDisplay">Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ch∆°i</div>
                </div>

                <div class="game-controls">
                    <button class="btn btn-success" id="startBtn" onclick="startGame()">‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu</button>
                    <button class="btn btn-danger" id="stopBtn" onclick="stopGame()" disabled>‚èπÔ∏è D·ª´ng</button>
                </div>

                <div id="answerDisplay" class="answer-display" style="display: none;"></div>
            </div>
        </div>

        <!-- Tab Th·ªëng k√™ -->
        <div id="stats" class="tab-content">
            <h3 style="margin-bottom: 20px; color: #4a5568; text-align: left;">üìä Th·ªëng k√™ h·ªçc t·∫≠p</h3>
            <div class="settings-grid">
                <div class="stats-card">
                    <div class="stats-number"><span class="stats-icon">üìö</span><span id="totalWords">0</span></div>
                    <div class="stats-label">T·ªïng t·ª´ v·ª±ng</div>
                </div>
                <div class="stats-card">
                    <div class="stats-number"><span class="stats-icon">üóÇÔ∏è</span><span id="totalCollections">0</span>
                    </div>
                    <div class="stats-label">T·ªïng B·ªô s∆∞u t·∫≠p</div>
                </div>
                <div class="stats-card">
                    <div class="stats-number"><span class="stats-icon">üéÆ</span><span id="totalSessions">0</span></div>
                    <div class="stats-label">L·∫ßn ch∆°i</div>
                </div>
                <div class="stats-card">
                    <div class="stats-number"><span class="stats-icon">üîç</span><span id="totalWordsShown">0</span>
                    </div>
                    <div class="stats-label">T·ª´ ƒë√£ hi·ªÉn th·ªã</div>
                </div>
                <div class="stats-card">
                    <div class="stats-number"><span class="stats-icon">‚è±Ô∏è</span><span id="averageTime">0s</span></div>
                    <div class="stats-label">Th·ªùi gian TB</div>
                </div>
            </div>

            <button class="btn btn-danger" onclick="resetStats()">üîÑ ƒê·∫∑t l·∫°i th·ªëng k√™</button>
        </div>
        <!-- Tab H∆∞·ªõng d·∫´n -->
        <div id="guide" class="tab-content">
            <h3 class="guide-title">üìñ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Reflex</h3>
            <div class="guide-content">
                <div class="guide-section">
                    <h4>1. Gi·ªõi thi·ªáu</h4>
                    <p>Reflex l√† ·ª©ng d·ª•ng web gi√∫p b·∫°n h·ªçc t·ª´ v·ª±ng v√† luy·ªán ph·∫£n x·∫° giao ti·∫øp ti·∫øng Anh ho·∫∑c ti·∫øng Ph√°p
                        th√¥ng qua tr√≤ ch∆°i. V·ªõi giao di·ªán th√¢n thi·ªán v√† t√≠nh nƒÉng qu·∫£n l√Ω t·ª´ v·ª±ng theo B·ªô s∆∞u t·∫≠p, b·∫°n
                        c√≥ th·ªÉ d·ªÖ d√†ng t·ªï ch·ª©c v√† h·ªçc t·ª´ v·ª±ng hi·ªáu qu·∫£.</p>
                </div>
                <div class="guide-section">
                    <h4>2. H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng c√°c tab</h4>
                    <div class="guide-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h5>Tab Thi·∫øt l·∫≠p</h5>
                            <ul>
                                <li>Nh·∫≠p t·ª´ v·ª±ng theo ƒë·ªãnh d·∫°ng: <code>Ti·∫øng Vi·ªát : Ti·∫øng Anh/Ti·∫øng Ph√°p</code> (m·ªói
                                    d√≤ng m·ªôt t·ª´ ho·∫∑c c√¢u).</li>
                                <li>Ch·ªçn ho·∫∑c t·∫°o B·ªô s∆∞u t·∫≠p m·ªõi ƒë·ªÉ t·ªï ch·ª©c t·ª´ v·ª±ng theo ch·ªß ƒë·ªÅ (v√≠ d·ª•: Giao ti·∫øp, Du
                                    l·ªãch).</li>
                                <li>T·∫£i file JSON ƒë·ªÉ nh·∫≠p nhanh danh s√°ch t·ª´ v·ª±ng.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h5>Tab B·ªô s∆∞u t·∫≠p</h5>
                            <ul>
                                <li>Xem danh s√°ch c√°c B·ªô s∆∞u t·∫≠p ƒë√£ t·∫°o.</li>
                                <li>Nh·∫•p v√†o B·ªô s∆∞u t·∫≠p ƒë·ªÉ xem t·ª´ v·ª±ng trong Modal.</li>
                                <li>Ch·ªânh s·ª≠a ho·∫∑c x√≥a t·ª´ v·ª±ng b·∫±ng n√∫t "S·ª≠a" ho·∫∑c "X√≥a".</li>
                                <li>Ch·ªçn nhi·ªÅu t·ª´ b·∫±ng checkbox ƒë·ªÉ x√≥a h√†ng lo·∫°t.</li>
                                <li>L∆∞u danh s√°ch B·ªô s∆∞u t·∫≠p ra file JSON.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h5>Tab Ch∆°i game</h5>
                            <ul>
                                <li>Ch·ªçn B·ªô s∆∞u t·∫≠p ho·∫∑c s·ª≠ d·ª•ng t·∫•t c·∫£ t·ª´ v·ª±ng ƒë·ªÉ ch∆°i.</li>
                                <li>ƒêi·ªÅu ch·ªânh ch·∫ø ƒë·ªô ch∆°i, th·ªùi gian hi·ªÉn th·ªã, v√† s·ªë l·∫ßn l·∫∑p.</li>
                                <li>Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ luy·ªán ph·∫£n x·∫° v·ªõi t·ª´ v·ª±ng/c√¢u ng·∫´u nhi√™n.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h5>Tab Th·ªëng k√™</h5>
                            <ul>
                                <li>Xem t·ªïng s·ªë t·ª´ v·ª±ng, B·ªô s∆∞u t·∫≠p, l·∫ßn ch∆°i, v√† th·ªùi gian trung b√¨nh.</li>
                                <li>ƒê·∫∑t l·∫°i th·ªëng k√™ n·∫øu c·∫ßn.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="guide-section">
                    <h4>3. S·ª≠ d·ª•ng AI ƒë·ªÉ t·∫°o m·∫´u c√¢u giao ti·∫øp</h4>
                    <p>S·ª≠ d·ª•ng c√°c m√¥ h√¨nh AI nh∆∞ Grok, GPT, Claude, ho·∫∑c Deepseek ƒë·ªÉ t·∫°o c√°c m·∫´u c√¢u giao ti·∫øp ti·∫øng
                        Anh ho·∫∑c ti·∫øng Ph√°p ph√π h·ª£p v·ªõi tr√¨nh ƒë·ªô c·ªßa b·∫°n.</p>
                    <div class="ai-prompt-container">
                        <div class="prompt-header">
                            <h5>L·ªánh g·ª£i √Ω (Prompt) cho AI</h5>
                            <div class="language-toggle">
                                <button class="lang-btn active" onclick="showPrompt('french')">Ti·∫øng Ph√°p</button>
                                <button class="lang-btn" onclick="showPrompt('english')">Ti·∫øng Anh</button>
                            </div>
                        </div>
                        <div class="prompt-content">
                            <p id="aiPromptFrench">
                                Please take on the role of a native French speaker and a French language teacher with 20
                                years of experience in teaching French communication. I am currently at the
                                <code>A2/B1/B2</code> level, but I still struggle with practical communication: I often
                                stutter, make mistakes when forming sentences, and hesitate when responding.

                                Every day, please provide me with 10 short, simple, and commonly used French phrases for
                                daily life. The goal is to help me practice speaking French naturally, without
                                translating from Vietnamese in my head.

                                Please ensure the following:

                                - The phrases are suitable for learners at the <code>A2/B1/B2</code> level.
                                - The sentences are practical and easy to apply in everyday situations.
                                - Each phrase should be followed by a clear Vietnamese translation.
                                - Present the sentences in the format: "Vietnamese meaning" : "French sentence".
                            </p>
                            <p id="aiPromptEnglish" style="display: none;">
                                Act as a native English speaker and a conversational English teacher with 20 years of
                                experience. I am currently at the <code>A2/B1/B2</code> level, but I struggle with
                                real-life communication: I stutter, form incorrect sentences, and hesitate when
                                responding.
                                Each day, provide me with 10 short, simple, and common conversational sentences used in
                                daily life. The goal is to help me practice natural English speaking without translating
                                from Vietnamese in my head.
                                Please ensure:
                                - The sentences are suitable for learners at the <code>A2/B1/B2</code> level.
                                - The sentences are practical and easily applicable in everyday situations.
                                - Include clear translations in Vietnamese.
                                - Format the sentences as: "Vietnamese meaning" : "English sentence"
                            </p>
                            <button class="btn copy-btn" onclick="copyPrompt()">üìã Sao ch√©p Prompt</button>
                        </div>
                        <h3>V√≠ d·ª• ƒë·∫ßu ra t·ª´ AI (Ti·∫øng Ph√°p):</h3>
                        <ul>
                            <li>"Xin ch√†o, b·∫°n kh·ªèe kh√¥ng?" : "Bonjour, tu vas bien ?"</li>
                            <li>"T√¥i mu·ªën m·ªôt c√† ph√™, l√†m ∆°n." : "Je voudrais un caf√©, s'il vous pla√Æt."</li>
                            <li>"B√¢y gi·ªù l√† m·∫•y gi·ªù?" : "Quelle heure est-il ?"</li>
                        </ul>
                        <h3>V√≠ d·ª• ƒë·∫ßu ra t·ª´ AI (Ti·∫øng Anh):</h3>
                        <ul>
                            <li>"Xin ch√†o, b·∫°n kh·ªèe kh√¥ng?" : "Hello, how are you?"</li>
                            <li>"T√¥i mu·ªën m·ªôt c√† ph√™, l√†m ∆°n." : "I‚Äôd like a coffee, please."</li>
                            <li>"B√¢y gi·ªù l√† m·∫•y gi·ªù?" : "What time is it?"</li>
                        </ul>
                        <h3>C√°ch s·ª≠ d·ª•ng:</h3>
                        <ol>
                            <li>Ch·ªçn ng√¥n ng·ªØ (Ti·∫øng Anh ho·∫∑c Ti·∫øng Ph√°p) v√† sao ch√©p l·ªánh g·ª£i √Ω b·∫±ng n√∫t "Sao ch√©p
                                Prompt".</li>
                            <li>Thay ƒë·ªïi tr√¨nh ƒë·ªô (<code>A2/B1/B2</code>) trong l·ªánh g·ª£i √Ω ƒë·ªÉ ph√π h·ª£p v·ªõi b·∫°n.</li>
                            <li>G·ª≠i l·ªánh g·ª£i √Ω cho AI (Grok, GPT, Claude, Deepseek, v.v.).</li>
                            <li>L·∫•y danh s√°ch c√¢u tr·∫£ v·ªÅ v√† nh·∫≠p v√†o tab "Thi·∫øt l·∫≠p" theo ƒë·ªãnh d·∫°ng
                                <code>Ti·∫øng Vi·ªát : Ti·∫øng Anh/Ti·∫øng Ph√°p</code>.</li>
                            <li>S·ª≠ d·ª•ng tab "Ch∆°i game" ƒë·ªÉ luy·ªán ph·∫£n x·∫° v·ªõi c√°c c√¢u n√†y.</li>
                        </ol>
                    </div>
                </div>
                <div class="guide-section">
                    <h4>4. M·∫πo h·ªçc hi·ªáu qu·∫£</h4>
                    <ul>
                        <li>T·∫°o B·ªô s∆∞u t·∫≠p theo ch·ªß ƒë·ªÅ ri√™ng cho t·ª´ng ng√¥n ng·ªØ (v√≠ d·ª•: "Ti·∫øng Anh - Giao ti·∫øp", "Ti·∫øng
                            Ph√°p - Du l·ªãch").</li>
                        <li>Luy·ªán t·∫≠p h√†ng ng√†y v·ªõi ch·∫ø ƒë·ªô "Tr·ªôn l·∫´n" ƒë·ªÉ tƒÉng ph·∫£n x·∫°.</li>
                        <li>S·ª≠ d·ª•ng AI ƒë·ªÉ l√†m m·ªõi t·ª´ v·ª±ng v√† m·∫´u c√¢u th∆∞·ªùng xuy√™n.</li>
                        <li>Theo d√µi ti·∫øn ƒë·ªô qua tab "Th·ªëng k√™" ƒë·ªÉ duy tr√¨ ƒë·ªông l·ª±c.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="collectionModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal()">&times;</span>
                <h3 id="modalTitle" style="margin-bottom: 20px; color: #4a5568;"></h3>
                <div class="form-group">
                    <button class="btn btn-danger" onclick="deleteSelectedWords()" style="display: none;"
                        id="deleteSelectedBtn">üóëÔ∏è X√≥a c√°c t·ª´ ƒë√£ ch·ªçn</button>
                </div>
                <div id="modalWordList" class="word-list"></div>
            </div>
        </div>
    </div>

    <script>
        let collections = [];
        let words = [];
        let currentGameWords = [];
        let currentWordIndex = 0;
        let isGameRunning = false;
        let gameInterval;
        let gamePhase = 'question'; // 'question' or 'answer'
        let gameStats = {
            totalSessions: 0,
            totalWordsShown: 0,
            totalTime: 0
        };

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        function init() {
            loadCollections();
            loadStats();
            updateCollectionList();
            updateCollectionSelects();
            updateStats();
            setupFileInput();
        }

        // Chuy·ªÉn ƒë·ªïi tab
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            document.querySelector(`.tab-btn[onclick="showTab('${tabName}')"]`).classList.add('active');

            if (tabName === 'collection') {
                updateCollectionList();
            }
        }

        // Th√™m t·ª´ v·ª±ng
        function addWords() {
            const input = document.getElementById('wordInput').value.trim();
            const collectionSelect = document.getElementById('collectionSelect').value;
            const newCollectionName = document.getElementById('newCollectionName').value.trim();

            if (!input) {
                showNotification('Vui l√≤ng nh·∫≠p t·ª´ v·ª±ng!', 'error');
                return;
            }

            let collectionId = collectionSelect;
            if (newCollectionName && !collectionSelect) {
                collectionId = Date.now().toString();
                collections.push({
                    id: collectionId,
                    name: newCollectionName,
                    words: []
                });
                showNotification(`ƒê√£ t·∫°o B·ªô s∆∞u t·∫≠p m·ªõi: ${newCollectionName}`, 'success');
            } else if (!collectionSelect) {
                showNotification('Vui l√≤ng ch·ªçn ho·∫∑c t·∫°o m·ªõi m·ªôt B·ªô s∆∞u t·∫≠p!', 'error');
                return;
            }

            const lines = input.split('\n');
            let addedCount = 0;

            lines.forEach(line => {
                const parts = line.split(':');
                if (parts.length === 2) {
                    const vietnamese = parts[0].trim();
                    const french = parts[1].trim();

                    if (vietnamese && french) {
                        const word = { vietnamese, french };
                        const collection = collections.find(c => c.id === collectionId);
                        if (collection) {
                            if (!collection.words.some(w => w.vietnamese === vietnamese && w.french === french)) {
                                collection.words.push(word);
                                addedCount++;
                            }
                        }
                        if (!words.some(w => w.vietnamese === vietnamese && w.french === french)) {
                            words.push(word);
                        }
                    }
                }
            });

            if (addedCount > 0) {
                document.getElementById('wordInput').value = '';
                document.getElementById('newCollectionName').value = '';
                saveCollections();
                saveWords();
                updateCollectionList();
                updateCollectionSelects();
                updateStats();
                showNotification(`ƒê√£ th√™m ${addedCount} t·ª´ v·ª±ng v√†o B·ªô s∆∞u t·∫≠p!`, 'success');
                showTab('collection');
            } else {
                showNotification('Kh√¥ng c√≥ t·ª´ v·ª±ng h·ª£p l·ªá n√†o ƒë∆∞·ª£c th√™m!', 'error');
            }
        }

        // X√≥a t·∫•t c·∫£ B·ªô s∆∞u t·∫≠p
        function clearCollections() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ B·ªô s∆∞u t·∫≠p?')) {
                collections = [];
                words = [];
                saveCollections();
                saveWords();
                updateCollectionList();
                updateCollectionSelects();
                updateStats();
                showNotification('ƒê√£ x√≥a t·∫•t c·∫£ B·ªô s∆∞u t·∫≠p!', 'info');
            }
        }

        // X√≥a m·ªôt B·ªô s∆∞u t·∫≠p
        function deleteCollection(id) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a B·ªô s∆∞u t·∫≠p n√†y?')) {
                collections = collections.filter(c => c.id !== id);
                words = words.filter(w => !collections.some(c => c.words.some(cw => cw.vietnamese === w.vietnamese && cw.french === w.french)));
                saveCollections();
                saveWords();
                updateCollectionList();
                updateCollectionSelects();
                updateStats();
                showNotification('ƒê√£ x√≥a B·ªô s∆∞u t·∫≠p!', 'info');
            }
        }

        // X√≥a m·ªôt t·ª´ v·ª±ng
        function deleteWord(collectionId, index) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·ª´ n√†y?')) {
                const collection = collections.find(c => c.id === collectionId);
                if (collection) {
                    const [removedWord] = collection.words.splice(index, 1);
                    words = words.filter(w => !(w.vietnamese === removedWord.vietnamese && w.french === removedWord.french));
                    saveCollections();
                    saveWords();
                    updateStats();
                    showCollectionWords(collectionId); // Refresh modal
                    showNotification('ƒê√£ x√≥a t·ª´ v·ª±ng!', 'info');
                }
            }
        }

        // C·∫≠p nh·∫≠t danh s√°ch B·ªô s∆∞u t·∫≠p
        function updateCollectionList() {
            const collectionListDiv = document.getElementById('collectionList');
            if (collections.length === 0) {
                collectionListDiv.innerHTML = '<p style="text-align: center; color: #666;">Ch∆∞a c√≥ B·ªô s∆∞u t·∫≠p n√†o. H√£y th√™m t·ª´ v·ª±ng ƒë·ªÉ t·∫°o!</p>';
                return;
            }

            collectionListDiv.innerHTML = collections.map(collection => `
                <div class="collection-item" onclick="showCollectionWords('${collection.id}')" style="cursor: pointer;">
                    <span >
                        <strong>${collection.name}</strong> (${collection.words.length} t·ª´)
                    </span>
                    <button class="delete-btn" onclick="deleteCollection('${collection.id}')">X√≥a</button>
                </div>
            `).join('');
        }

        // Hi·ªÉn th·ªã t·ª´ v·ª±ng trong B·ªô s∆∞u t·∫≠p qua Modal
        function showCollectionWords(collectionId) {
            const collection = collections.find(c => c.id === collectionId);
            if (!collection) return;

            const modal = document.getElementById('collectionModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalWordList = document.getElementById('modalWordList');

            modalTitle.textContent = collection.name;
            modalWordList.innerHTML = collection.words.length === 0 ?
                '<p style="text-align: center; color: #666;">Ch∆∞a c√≥ t·ª´ v·ª±ng trong B·ªô s∆∞u t·∫≠p n√†y.</p>' :
                collection.words.map((word, index) => `
                                        <div class="word-item" id="word-item-${collectionId}-${index}">
                        <input type="checkbox" class="word-checkbox" data-collection-id="${collectionId}" data-index="${index}">
                        <span class="word-text"><strong>${word.vietnamese}</strong> ‚Üí ${word.french}</span>
                        <div>
                            <button class="edit-btn" onclick="editWord('${collectionId}', ${index})">S·ª≠a</button>
                            <button class="delete-btn" onclick="deleteWord('${collectionId}', ${index})">X√≥a</button>
                        </div>
                    </div>
                `).join('');

            modal.style.display = 'flex';
            // Th√™m s·ª± ki·ªán cho checkbox
            document.querySelectorAll('.word-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateDeleteSelectedButton);
            });
            updateDeleteSelectedButton();
        }

        // Ch·ªânh s·ª≠a t·ª´ v·ª±ng
        function editWord(collectionId, index) {
            const collection = collections.find(c => c.id === collectionId);
            if (!collection) return;

            const word = collection.words[index];
            const wordItem = document.getElementById(`word-item-${collectionId}-${index}`);
            wordItem.innerHTML = `
                <div class="edit-form">
                    <input type="text" id="edit-vietnamese-${collectionId}-${index}" value="${word.vietnamese}">
                    <span> ‚Üí </span>
                    <input type="text" id="edit-french-${collectionId}-${index}" value="${word.french}">
                    <div>
                        <button class="btn btn-success" onclick="saveWord('${collectionId}', ${index})">L∆∞u</button>
                        <button class="btn btn-danger" onclick="showCollectionWords('${collectionId}')">H·ªßy</button>
                    </div>
                </div>
            `;
        }

        // L∆∞u t·ª´ v·ª±ng sau khi ch·ªânh s·ª≠a
        function saveWord(collectionId, index) {
            const collection = collections.find(c => c.id === collectionId);
            if (!collection) return;

            const vietnamese = document.getElementById(`edit-vietnamese-${collectionId}-${index}`).value.trim();
            const french = document.getElementById(`edit-french-${collectionId}-${index}`).value.trim();

            if (vietnamese && french) {
                const oldWord = collection.words[index];
                collection.words[index] = { vietnamese, french };

                // C·∫≠p nh·∫≠t danh s√°ch words t·ªïng
                const wordIndex = words.findIndex(w => w.vietnamese === oldWord.vietnamese && w.french === oldWord.french);
                if (wordIndex !== -1) {
                    words[wordIndex] = { vietnamese, french };
                } else {
                    words.push({ vietnamese, french });
                }

                saveCollections();
                saveWords();
                updateStats();
                showCollectionWords(collectionId);
                showNotification('ƒê√£ c·∫≠p nh·∫≠t t·ª´ v·ª±ng!', 'success');
            } else {
                showNotification('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß t·ª´ v·ª±ng!', 'error');
            }
        }
        // X√≥a c√°c t·ª´ ƒë∆∞·ª£c ch·ªçn
        function deleteSelectedWords() {
            const checkboxes = document.querySelectorAll('.word-checkbox:checked');
            if (checkboxes.length === 0) {
                showNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt t·ª´ ƒë·ªÉ x√≥a!', 'error');
                return;
            }

            if (confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ${checkboxes.length} t·ª´ ƒë√£ ch·ªçn?`)) {
                const collectionUpdates = {};
                checkboxes.forEach(checkbox => {
                    const collectionId = checkbox.getAttribute('data-collection-id');
                    const index = parseInt(checkbox.getAttribute('data-index'));

                    if (!collectionUpdates[collectionId]) {
                        collectionUpdates[collectionId] = [];
                    }
                    collectionUpdates[collectionId].push(index);
                });

                Object.keys(collectionUpdates).forEach(collectionId => {
                    const collection = collections.find(c => c.id === collectionId);
                    if (collection) {
                        const indices = collectionUpdates[collectionId].sort((a, b) => b - a);
                        indices.forEach(index => {
                            const [removedWord] = collection.words.splice(index, 1);
                            words = words.filter(w => !(w.vietnamese === removedWord.vietnamese && w.french === removedWord.french));
                        });
                    }
                });

                saveCollections();
                saveWords();
                updateStats();
                showCollectionWords(Object.keys(collectionUpdates)[0]); // Refresh modal with the first updated collection
                showNotification(`ƒê√£ x√≥a ${checkboxes.length} t·ª´ v·ª±ng!`, 'info');
            }
        }

        // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t x√≥a nhi·ªÅu t·ª´
        function updateDeleteSelectedButton() {
            const deleteBtn = document.getElementById('deleteSelectedBtn');
            const checkboxes = document.querySelectorAll('.word-checkbox:checked');
            deleteBtn.style.display = checkboxes.length > 0 ? 'inline-block' : 'none';
        }

        // ƒê√≥ng Modal
        function closeModal() {
            document.getElementById('collectionModal').style.display = 'none';
            updateCollectionList(); // C·∫≠p nh·∫≠t l·∫°i danh s√°ch B·ªô s∆∞u t·∫≠p khi ƒë√≥ng modal
        }

        // ƒê√≥ng Modal khi nh·∫•p ra ngo√†i
        document.getElementById('collectionModal').addEventListener('click', function (event) {
            if (event.target === this) {
                closeModal();
            }
        });

        // C·∫≠p nh·∫≠t danh s√°ch B·ªô s∆∞u t·∫≠p trong select box
        function updateCollectionSelects() {
            const collectionSelect = document.getElementById('collectionSelect');
            const gameCollectionSelect = document.getElementById('gameCollectionSelect');
            const options = collections.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            collectionSelect.innerHTML = '<option value="">-- Ch·ªçn ho·∫∑c t·∫°o m·ªõi --</option>' + options;
            gameCollectionSelect.innerHTML = '<option value="">-- T·∫•t c·∫£ t·ª´ v·ª±ng --</option>' + options;
        }

        // B·∫Øt ƒë·∫ßu game
        function startGame() {
            const collectionId = document.getElementById('gameCollectionSelect').value;
            const repeatCount = parseInt(document.getElementById('repeatCount').value) || 1;

            let gameWords = collectionId ?
                collections.find(c => c.id === collectionId)?.words || [] :
                [...words];

            if (gameWords.length === 0) {
                showNotification('Vui l√≤ng th√™m t·ª´ v·ª±ng tr∆∞·ªõc khi ch∆°i!', 'error');
                return;
            }

            isGameRunning = true;
            gamePhase = 'question';
            currentWordIndex = 0;
            currentGameWords = [];

            // T·∫°o danh s√°ch t·ª´ v·ªõi s·ªë l·∫ßn l·∫∑p
            for (let i = 0; i < repeatCount; i++) {
                const shuffled = [...gameWords].sort(() => Math.random() - 0.5);
                currentGameWords.push(...shuffled);
            }

            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;

            gameStats.totalSessions++;
            saveStats();
            updateStats();

            showNextWord();
        }

        // D·ª´ng game
        function stopGame() {
            isGameRunning = false;
            clearInterval(gameInterval);

            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('answerDisplay').style.display = 'none';

            document.getElementById('wordDisplay').textContent = 'Game ƒë√£ d·ª´ng';
            document.getElementById('progressFill').style.width = '0%';

            showNotification('Game ƒë√£ d·ª´ng!', 'info');
        }

        // Hi·ªÉn th·ªã t·ª´ ti·∫øp theo
                // Hi·ªÉn th·ªã t·ª´ ti·∫øp theo
                function showNextWord() {
            if (!isGameRunning || currentWordIndex >= currentGameWords.length) {
                stopGame();
                showNotification('ƒê√£ ho√†n th√†nh t·∫•t c·∫£ t·ª´ v·ª±ng!', 'success');
                return;
            }

            const currentWord = currentGameWords[currentWordIndex];
            const displayTime = parseFloat(document.getElementById('displayTime').value) * 1000;
            const answerDisplayTime = parseFloat(document.getElementById('answerDisplayTime').value) * 1000;
            const gameMode = document.getElementById('gameMode').value;

            if (gamePhase === 'question') {
                document.getElementById('answerDisplay').style.display = 'none';

                let displayText = '';
                if (gameMode === 'vietnamese-to-target') {
                    displayText = currentWord.vietnamese;
                } else if (gameMode === 'target-to-vietnamese') {
                    displayText = currentWord.french; // Assuming French as target, adjust if English is preferred
                } else { // mixed mode
                    displayText = Math.random() > 0.5 ? currentWord.vietnamese : currentWord.french;
                }

                document.getElementById('wordDisplay').textContent = displayText;

                const progress = ((currentWordIndex + 1) / currentGameWords.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';

                gameStats.totalWordsShown++;
                gameStats.totalTime += displayTime;
                saveStats();
                updateStats();

                gamePhase = 'answer';
                gameInterval = setTimeout(() => {
                    showCurrentAnswer();
                }, displayTime);
            } else if (gamePhase === 'answer') {
                currentWordIndex++;
                gamePhase = 'question';
                gameInterval = setTimeout(() => {
                    showNextWord();
                }, answerDisplayTime);
            }
        }
        
        // Hi·ªÉn th·ªã ƒë√°p √°n c·ªßa t·ª´ hi·ªán t·∫°i
                // Hi·ªÉn th·ªã ƒë√°p √°n c·ªßa t·ª´ hi·ªán t·∫°i
                function showCurrentAnswer() {
            if (!isGameRunning || currentWordIndex >= currentGameWords.length) return;

            const currentWord = currentGameWords[currentWordIndex];
            const gameMode = document.getElementById('gameMode').value;
            const currentDisplay = document.getElementById('wordDisplay').textContent;
            let answerHTML = '';

            if (gameMode === 'vietnamese-to-target') {
                answerHTML = `
                    <div class="answer-vietnamese">${currentWord.vietnamese}</div>
                    <div class="answer-french">${currentWord.french}</div>
                `;
            } else if (gameMode === 'target-to-vietnamese') {
                answerHTML = `
                    <div class="answer-french">${currentWord.french}</div>
                    <div class="answer-vietnamese">${currentWord.vietnamese}</div>
                `;
            } else { // mixed mode
                if (currentDisplay === currentWord.vietnamese) {
                    answerHTML = `
                        <div class="answer-french">${currentWord.french}</div>
                        <div class="answer-vietnamese">${currentWord.vietnamese}</div>
                    `;
                } else {
                    answerHTML = `
                        <div class="answer-vietnamese">${currentWord.vietnamese}</div>
                        <div class="answer-french">${currentWord.french}</div>
                    `;
                }
            }

            document.getElementById('answerDisplay').innerHTML = answerHTML;
            document.getElementById('answerDisplay').style.display = 'block';

            showNextWord();
        }

        // L∆∞u Collections
        function saveCollections() {
            localStorage.setItem('frenchCollections', JSON.stringify(collections));
        }

        // T·∫£i Collections
        function loadCollections() {
            const savedCollections = localStorage.getItem('frenchCollections');
            if (savedCollections) {
                collections = JSON.parse(savedCollections);
                collections.forEach(c => {
                    c.words.forEach(w => {
                        if (!words.some(wd => wd.vietnamese === w.vietnamese && wd.french === w.french)) {
                            words.push(w);
                        }
                    });
                });
            }
        }

        // L∆∞u t·ª´ v·ª±ng
        function saveWords() {
            localStorage.setItem('frenchWords', JSON.stringify(words));
        }

        // T·∫£i t·ª´ v·ª±ng
        function loadWords() {
            const savedWords = localStorage.getItem('frenchWords');
            if (savedWords) {
                words = JSON.parse(savedWords);
            }
        }

        // L∆∞u th·ªëng k√™
        function saveStats() {
            localStorage.setItem('frenchGameStats', JSON.stringify(gameStats));
        }

        // T·∫£i th·ªëng k√™
        function loadStats() {
            const savedStats = localStorage.getItem('frenchGameStats');
            if (savedStats) {
                gameStats = JSON.parse(savedStats);
            }
        }

        // C·∫≠p nh·∫≠t th·ªëng k√™
        function updateStats() {
            document.getElementById('totalWords').textContent = words.length;
            document.getElementById('totalCollections').textContent = collections.length;
            document.getElementById('totalSessions').textContent = gameStats.totalSessions;
            document.getElementById('totalWordsShown').textContent = gameStats.totalWordsShown;

            const avgTime = gameStats.totalWordsShown > 0 ?
                (gameStats.totalTime / gameStats.totalWordsShown / 1000).toFixed(1) : 0;
            document.getElementById('averageTime').textContent = avgTime + 's';
        }

        // ƒê·∫∑t l·∫°i th·ªëng k√™
        function resetStats() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒë·∫∑t l·∫°i t·∫•t c·∫£ th·ªëng k√™?')) {
                gameStats = {
                    totalSessions: 0,
                    totalWordsShown: 0,
                    totalTime: 0
                };
                saveStats();
                updateStats();
                showNotification('ƒê√£ ƒë·∫∑t l·∫°i th·ªëng k√™!', 'info');
            }
        }

        // L∆∞u danh s√°ch t·ª´ v·ª±ng ra file JSON
        function saveToFile() {
            if (collections.length === 0) {
                showNotification('Kh√¥ng c√≥ B·ªô s∆∞u t·∫≠p n√†o ƒë·ªÉ l∆∞u!', 'error');
                return;
            }

            const dataStr = JSON.stringify(collections, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);

            const exportFileDefaultName = 'french-collections.json';
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();

            showNotification('ƒê√£ l∆∞u file th√†nh c√¥ng!', 'success');
        }

        // Thi·∫øt l·∫≠p file input
        function setupFileInput() {
            const fileInput = document.getElementById('fileInput');
            fileInput.addEventListener('change', handleFileSelect);
        }

        // X·ª≠ l√Ω file ƒë∆∞·ª£c ch·ªçn
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = function (e) {
                    try {
                        const importedCollections = JSON.parse(e.target.result);
                        if (Array.isArray(importedCollections)) {
                            collections = importedCollections;
                            words = [];
                            collections.forEach(c => {
                                c.words.forEach(w => {
                                    if (!words.some(wd => wd.vietnamese === w.vietnamese && wd.french === w.french)) {
                                        words.push(w);
                                    }
                                });
                            });
                            saveCollections();
                            saveWords();
                            updateCollectionList();
                            updateCollectionSelects();
                            updateStats();
                            showNotification(`ƒê√£ t·∫£i ${collections.length} B·ªô s∆∞u t·∫≠p!`, 'success');
                            showTab('collection');
                        } else {
                            showNotification('File JSON kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng!', 'error');
                        }
                    } catch (error) {
                        showNotification('L·ªói khi ƒë·ªçc file JSON!', 'error');
                    }
                };
                reader.readAsText(file);
            } else {
                showNotification('Vui l√≤ng ch·ªçn file JSON!', 'error');
            }
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Hi·ªÉn th·ªã prompt theo ng√¥n ng·ªØ
        function showPrompt(language) {
            const frenchPrompt = document.getElementById('aiPromptFrench');
            const englishPrompt = document.getElementById('aiPromptEnglish');
            const frenchBtn = document.querySelector('.lang-btn[onclick="showPrompt(\'french\')"]');
            const englishBtn = document.querySelector('.lang-btn[onclick="showPrompt(\'english\')"]');

            if (language === 'french') {
                frenchPrompt.style.display = 'block';
                englishPrompt.style.display = 'none';
                frenchBtn.classList.add('active');
                englishBtn.classList.remove('active');
            } else {
                frenchPrompt.style.display = 'none';
                englishPrompt.style.display = 'block';
                frenchBtn.classList.remove('active');
                englishBtn.classList.add('active');
            }
        }

        // Sao ch√©p prompt
        function copyPrompt() {
            const frenchPrompt = document.getElementById('aiPromptFrench');
            const englishPrompt = document.getElementById('aiPromptEnglish');
            const activePrompt = frenchPrompt.style.display === 'block' ? frenchPrompt : englishPrompt;

            navigator.clipboard.writeText(activePrompt.textContent.trim())
                .then(() => showNotification('ƒê√£ sao ch√©p prompt!', 'success'))
                .catch(() => showNotification('L·ªói khi sao ch√©p prompt!', 'error'));
        }

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>